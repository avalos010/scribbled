{"version":3,"sources":["webpack:///./frontend/components/files/books/top_charts.jsx"],"names":["TopCharts","props","state","loading","books","fetchBooks","then","setState","items","top_books","filter","book","average_rating","sort","a","b","map","i","id","React","Component","mapStateToProps","ownProps","Object","values","entities","mapDispatchToProps","dispatch","connect"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;;IAEMA,S;;;AACJ,qBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,mFAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACXC,aAAO,EAAE,CAAC,CAAC,MAAKF,KAAL,CAAWG;AADX,KAAb;AAFiB;AAKlB;;;;wCACmB;AAAA;;AAClB,WAAKH,KAAL,CAAWI,UAAX,GAAwBC,IAAxB,CAA6B;AAAA,eAAM,MAAI,CAACC,QAAL,CAAc;AAAEJ,iBAAO,EAAE;AAAX,SAAd,CAAN;AAAA,OAA7B;AACD;;;6BAEQ;AACP,UAAIK,KAAJ;;AACA,UAAI,CAAC,KAAKN,KAAL,CAAWC,OAAhB,EAAyB;AACvB,YAAIM,SAAS,GAAG,KAAKR,KAAL,CAAWG,KAAX,CAAiBM,MAAjB,CACd,UAACC,IAAD;AAAA,iBAAUA,IAAI,CAACC,cAAL,GAAsB,CAAhC;AAAA,SADc,CAAhB;AAIAJ,aAAK,GAAGC,SAAS,CACdI,IADK,CACA,UAACC,CAAD,EAAIC,CAAJ;AAAA,iBAAUA,CAAC,CAACH,cAAF,GAAmBE,CAAC,CAACF,cAA/B;AAAA,SADA,EAELI,GAFK,CAED,UAACL,IAAD,EAAOM,CAAP,EAAa;AAChB,iBACE;AAAI,eAAG,EAAEN,IAAI,CAACO,EAAd;AAAkB,qBAAS,EAAC;AAA5B,aACE,2DAAC,yDAAD;AAAe,gBAAI,EAAEP,IAArB;AAA2B,gBAAI,EAAEM,CAAC,GAAG,CAArC;AAAwC,uBAAW,EAAE;AAArD,YADF,CADF;AAKD,SARK,CAAR;AASD;;AAED,aACE;AAAK,iBAAS,EAAC;AAAf,SACE,2DAAC,mDAAD;AAAS,mBAAW,EAAE;AAAtB,QADF,EAEE;AAAK,iBAAS,EAAC;AAAf,SACE;AAAK,iBAAS,EAAC;AAAf,SACE;AAAK,iBAAS,EAAC;AAAf,SACE,oFADF,EAEE,qLAFF,CADF,CADF,EAUE;AAAK,iBAAS,EAAC;AAAf,SACE;AAAI,iBAAS,EAAC;AAAd,SAAiCT,KAAjC,CADF,CAVF,CAFF,CADF;AAmBD;;;;EAhDqBW,4CAAK,CAACC,S;;AAmD9B,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACnB,KAAD,EAAQoB,QAAR,EAAqB;AAC3C,SAAO;AACLlB,SAAK,EAAEmB,MAAM,CAACC,MAAP,CAActB,KAAK,CAACuB,QAAN,CAAerB,KAA7B;AADF,GAAP;AAGD,CAJD;;AAMA,IAAMsB,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,QAAD,EAAWL,QAAX;AAAA,SAAyB;AAClDjB,cAAU,EAAE;AAAA,aAAMsB,QAAQ,CAACtB,wEAAU,EAAX,CAAd;AAAA;AADsC,GAAzB;AAAA,CAA3B;;AAIeuB,0HAAO,CAACP,eAAD,EAAkBK,kBAAlB,CAAP,CAA6C1B,SAA7C,CAAf,E","file":"5.bundle.js","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport SideBar from \"../../ui/sidebar\";\nimport { fetchBooks } from \"../../../actions/book_actions\";\nimport BookIndexItem from \"./books_index_item\";\n\nclass TopCharts extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: !!this.props.books,\n    };\n  }\n  componentDidMount() {\n    this.props.fetchBooks().then(() => this.setState({ loading: false }));\n  }\n\n  render() {\n    let items;\n    if (!this.state.loading) {\n      let top_books = this.props.books.filter(\n        (book) => book.average_rating > 3\n      );\n\n      items = top_books\n        .sort((a, b) => b.average_rating - a.average_rating)\n        .map((book, i) => {\n          return (\n            <li key={book.id} className=\"top-book-li\">\n              <BookIndexItem book={book} rank={i + 1} description={true} />\n            </li>\n          );\n        });\n    }\n\n    return (\n      <div className=\"main-component-container\">\n        <SideBar showSidebar={true} />\n        <div className=\"main-component\">\n          <div className=\"main-section1\">\n            <div className=\"page-header\">\n              <h1>Top Charts</h1>\n              <span>\n                The most popular books and audiobooks that are topping\n                bestseller lists and generating buzz from critics.\n              </span>\n            </div>\n          </div>\n          <div className=\"main-section2\">\n            <ol className=\"top-charts-list\">{items}</ol>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    books: Object.values(state.entities.books),\n  };\n};\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  fetchBooks: () => dispatch(fetchBooks()),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TopCharts);\n"],"sourceRoot":""}