{"version":3,"sources":["webpack:///./frontend/components/files/books/book_show.jsx","webpack:///./frontend/components/files/books/reviews.jsx","webpack:///./frontend/components/files/books/reviews_list.jsx"],"names":["BookShow","props","state","saved","userSaves","some","save","item_id","id","handleSave","bind","fetchBook","fetchSavesForUser","createSave","item_type","then","setState","book_show","bookButton","borderColor","backgroundColor","color","cursor","book","cover_url","title","author","average_rating","window","starEmptyURL","redStarFullURL","faCopy","pages","description","publisher","release_date","isbn","React","Component","mapStateToProps","match","parseInt","params","entities","books","user_id","session","Object","values","saves","mapDispatchToProps","dispatch","connect","Reviews","review_text","rating","undefined","book_id","loading","handleSubmit","resetRating","bookId","clearErrors","field","e","currentTarget","value","preventDefault","review","submitReview","setTimeout","err","errors","slice","map","error","i","faExclamationCircle","resetBtn","override","allReviews","reviewForm","reviews","reviewAuthorIds","includes","renderErrors","starFullURL","rate","update","createReview","clearReviewsErrors","withRouter","ReviewsList","length","rev","sort","a","b","userClass"],"mappings":"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","file":"2.bundle.js","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport SideBar from \"../../ui/sidebar\";\nimport { fetchBook } from \"../../../actions/book_actions\";\nimport { createSave, fetchSavesForUser } from \"../../../actions/save_actions\";\nimport { faCopy } from \"@fortawesome/free-regular-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport Rating from \"react-rating\";\nimport Reviews from \"./reviews\";\n\nclass BookShow extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      saved: this.props.userSaves.some(\n        (save) => save.item_id === this.props.id\n      ),\n    };\n    this.handleSave = this.handleSave.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.fetchBook(this.props.id);\n    this.props.fetchSavesForUser();\n  }\n\n  handleSave() {\n    this.props\n      .createSave({\n        item_id: this.props.id,\n        item_type: \"Book\",\n      })\n      .then(this.setState({ saved: true }));\n  }\n\n  render() {\n    let book_show = null;\n\n    let bookButton;\n\n    if (this.props.userSaves.some((save) => save.item_id === this.props.id)) {\n      bookButton = (\n        <button\n          className=\"save-btn submit-btn\"\n          disabled\n          style={{\n            borderColor: \"transparent\",\n            backgroundColor: \"transparent\",\n            color: \"#1e7b85\",\n            cursor: \"default\"\n          }}\n        >\n          Saved\n        </button>\n      );\n    } else {\n      bookButton = (\n        <button className=\"save-btn submit-btn\" onClick={this.handleSave}>\n          Save For Later\n        </button>\n      );\n    }\n\n    if (this.props.book) {\n      book_show = (\n        <div className=\"book-show-container\">\n          <nav>\n            <ol className=\"sub-nav\">\n              <li>\n                <Link to=\"/\">Home</Link>\n              </li>\n              <li id=\"carat\">></li>\n              <li>\n                <Link to=\"/books\">Books</Link>\n              </li>\n            </ol>\n          </nav>\n          <div className=\"book-show-details\">\n            <div className=\"left-col\">\n              <img src={this.props.book.cover_url} width=\"220\" />\n              <div className=\"book-show-btns-container\">{bookButton}</div>\n            </div>\n            <div className=\"right-col\">\n              <div className=\"book-title\">{this.props.book.title}</div>\n              <div className=\"author\">\n                By <span className=\"author-name\">{this.props.book.author}</span>\n              </div>\n              <div className=\"pages-rating-container\">\n                <div className=\"small-rating rating-wrapper\">\n                  {this.props.book.average_rating ? (\n                    <Rating\n                      readonly\n                      initialRating={this.props.book.average_rating}\n                      emptySymbol={\n                        <img\n                          src={window.starEmptyURL}\n                          opacity=\"0.4\"\n                          className=\"icon\"\n                          id=\"empty-star\"\n                        />\n                      }\n                      fullSymbol={\n                        <img\n                          src={window.redStarFullURL}\n                          height=\"21px\"\n                          padding-right=\"0px\"\n                          className=\"icon\"\n                          id=\"color-star\"\n                        />\n                      }\n                    />\n                  ) : (\n                    <span>No Reviews</span>\n                  )}\n                </div>\n                <div className=\"pages\">\n                  <FontAwesomeIcon icon={faCopy} width=\"25px\" id=\"pages-icon\" />\n                  <span>{this.props.book.pages} Pages</span>\n                </div>\n              </div>\n              <div className=\"book-show-divider\"></div>\n              <div className=\"description\">{this.props.book.description}</div>\n              <div className=\"book-data-table\">\n                <div>PUBLISHER: </div>\n                <div>{this.props.book.publisher}</div>\n                <div>RELEASED: </div>\n                <div>{this.props.book.release_date}</div>\n                <div>ISBN: </div>\n                <div>{this.props.book.isbn}</div>\n                <div>FORMAT: </div>\n                <div>Book</div>\n              </div>\n            </div>\n          </div>\n          <Reviews />\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"main-component-container\">\n        <SideBar showSidebar={true} />\n        <div className=\"main-component\">{book_show}</div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state, { match }) => {\n  const id = parseInt(match.params.id);\n  return {\n    id: id,\n    book: state.entities.books[id],\n    user_id: state.session.id,\n    userSaves: Object.values(state.entities.saves),\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  fetchBook: (id) => dispatch(fetchBook(id)),\n  fetchSavesForUser: () => dispatch(fetchSavesForUser()),\n  createSave: (save) => dispatch(createSave(save)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BookShow);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport Rating from \"react-rating\";\nimport { fetchBook, createReview } from \"../../../actions/book_actions\";\nimport ReviewsList from \"./reviews_list\";\nimport RotateLoader from \"react-spinners/PulseLoader\";\nimport { css } from \"@emotion/core\";\nimport { faExclamationCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { clearReviewsErrors } from \"../../../actions/book_actions\";\n\nclass Reviews extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      review_text: \"\",\n      rating: undefined,\n      book_id: this.props.book.id,\n      user_id: this.props.user_id,\n      loading: false\n    };\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.resetRating = this.resetRating.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.fetchBook(this.props.bookId);\n  }\n\n  componentWillUnmount() {\n    this.props.clearErrors();\n  }\n\n  resetRating() {\n    this.setState({\n      rating: undefined\n    });\n  }\n\n  update(field) {\n    return e => {\n      this.setState({\n        [field]: e.currentTarget.value\n      });\n    };\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    let { loading, ...review } = this.state;\n    review.rating = parseInt(review.rating);\n\n    this.setState({\n      loading: true\n    });\n\n    this.props.submitReview(review).then(\n      () => {\n        this.props.fetchBook(this.props.bookId);\n        setTimeout(() => {\n          this.setState({\n            review_text: \"\",\n            rating: undefined,\n            book_id: this.props.book.id,\n            user_id: this.props.user_id,\n            loading: false\n          });\n        }, 1000);\n      },\n      err => {\n        this.setState({\n          loading: false\n        });\n      }\n    );\n  }\n\n  renderErrors() {\n    return (\n      <ul className=\"errors-list\">\n        {this.props.errors.slice(0, 3).map((error, i) => (\n          <li key={`error-${i}`} className=\"err\">\n            <FontAwesomeIcon icon={faExclamationCircle} id=\"error-icon\" />\n            {error}\n          </li>\n        ))}\n      </ul>\n    );\n  }\n\n  render() {\n    let resetBtn = null;\n\n    if (this.state.loading) {\n      const override = css`\n        display: block;\n        margin: auto;\n        border-color: white;\n      `;\n      return (\n        <div className=\"main-component-container\">\n          <div className=\"loading submit-loading\">\n            <RotateLoader\n              css={override}\n              size={20}\n              color={\"#1a7d88\"}\n              loading={this.state.loading}\n            />\n          </div>\n        </div>\n      );\n    }\n\n    if (this.state.rating !== undefined) {\n      resetBtn = (\n        <button className=\"rating-reset-button\" onClick={this.resetRating}>\n          Clear Rating\n        </button>\n      );\n    }\n\n    let allReviews = null;\n    let reviewForm = null;\n\n    if (this.props.book.reviews) {\n      if (!this.props.book.reviewAuthorIds.includes(this.props.user_id)) {\n        reviewForm = (\n          <div className=\"review-form-container\">\n            <div className=\"errors-container\">{this.renderErrors()}</div>\n            <form className=\"review-form\">\n              <div className=\"form-row\">\n                <div className=\"rating-label\">What did you think?</div>\n                <div className=\"rating-container\">\n                  <Rating\n                    initialRating={this.state.rating}\n                    value={this.state.rating}\n                    emptySymbol={\n                      <img\n                        src={window.starEmptyURL}\n                        id=\"form-rating-star\"\n                        className=\"icon\"\n                      />\n                    }\n                    fullSymbol={\n                      <img\n                        src={window.starFullURL}\n                        id=\"form-rating-star\"\n                        className=\"icon\"\n                      />\n                    }\n                    onClick={rate => this.setState({ rating: [rate] })}\n                  />\n                  {resetBtn}\n                </div>\n              </div>\n              <div className=\"rating-label review-label\">Write a Review?</div>\n              <textarea\n                id=\"review-input\"\n                placeholder=\"Tell us what you liked about the book!\"\n                value={this.state.review_text}\n                onChange={this.update(\"review_text\")}\n                className=\"upload-input\"\n              />\n              <div className=\"review-btn-container\">\n                <button\n                  onClick={this.handleSubmit}\n                  type=\"submit\"\n                  className=\"post-review-btn submit-btn\"\n                >\n                  Post Review\n                </button>\n              </div>\n            </form>\n          </div>\n        );\n      }\n    }\n\n    return (\n      <div className=\"reviews-contain\">\n        {reviewForm}\n        <div>\n          <h2 className=\"reviews-header\">Reader Reviews</h2>\n          <ul className=\"reveiws-list\">\n            <ReviewsList user_id={this.props.user_id} book={this.props.book} />\n          </ul>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state, { match }) => {\n  const bookId = parseInt(match.params.id);\n  return {\n    bookId,\n    book: state.entities.books[bookId],\n    user_id: state.session.id,\n    errors: state.errors.reviews\n    // ,\n    // reviews: Object.values(state.entities.books[bookId].reviews)\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  fetchBook: bookId => dispatch(fetchBook(bookId)),\n  submitReview: review => dispatch(createReview(review)),\n  clearErrors: () => dispatch(clearReviewsErrors())\n});\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(Reviews)\n);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport Rating from \"react-rating\";\n\nclass ReviewsList extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let allReviews = null;\n    if (this.props.book.reviews) {\n      if (this.props.book.reviews.length === 0 ) {\n        return <div>No reviews yet</div>\n      }\n      let rev = this.props.book.reviews.sort((a, b) => b.id - a.id)\n      allReviews = rev.map(review => {\n        if (review) {\n          let userClass =\n            this.props.user_id === review.user_id ? \"users-review\" : \"\";\n          return (\n            <li key={review.id} className={`review-item ${userClass}`}>\n              <div className=\"review-left\">\n                <div className=\"review-text\">{review.review_text}</div>\n              </div>\n              <div className=\"review-right\">\n                <div className=\"small-rating\">\n                  <Rating\n                    initialRating={review.rating}\n                    readonly\n                    placeholderRating={review.rating}\n                    emptySymbol={\n                      <img\n                        src={window.starEmptyURL}\n                        opacity=\"0.4\"\n                        className=\"icon\"\n                        id=\"empty-star\"\n                      />\n                    }\n                    fullSymbol={\n                      <img\n                        src={window.redStarFullURL}\n                        height=\"21px\"\n                        padding-right=\"0px\"\n                        className=\"icon\"\n                        id=\"color-star\"\n                      />\n                    }\n                  />\n                </div>\n                {/* <div>({review.rating}/5)</div> */}\n              </div>\n            </li>\n          );\n        } else {\n          return null;\n        }\n      });\n    }\n    return allReviews;\n  }\n}\n\nexport default ReviewsList;\n"],"sourceRoot":""}